YUI.add("empty-photo-page-view",(function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this},subviewConfig:{"global-nav-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"footer-full-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0}},additionalViewClasses:function(){var e=[];return this.appContext.getViewer().signedIn||e.push("has-global-nav"),e},buildContainer:function(){return this.setContainerWithTemplate("empty-photo-page"),this}},{ATTRS:{}})}),"@VERSION@",{requires:["flickr-view","hermes-template-empty-photo-page","overflow-helper","url"],optional:["global-nav-view"],langBundles:["common","photo-page-scrappy"]});YUI.add("hermes-template-photo-page-lightbox",(function(e,t){var a=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,t,a,l,r){var n=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((n(a,"outlet")||t&&n(t,"outlet")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?n(t,"photo-well-view"):t,{name:"outlet",hash:{},data:r,loc:{start:{line:1,column:0},end:{line:1,column:26}}}))+"\n"},useData:!0}),l={};e.Array.each([],(function(t){var a=e.Template.get("hermes/"+t);a&&(l[t]=a)})),e.Template.register("hermes/photo-page-lightbox",(function(t,r){return(r=r||{}).partials=r.partials?e.merge(l,r.partials):l,a(t,r)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("photo-card-engagement-view",(function(e,t){var n=require("hermes-core/flog")(t);e.namespace("Views")[this.name]=e.Base.create("photo-card-engagement-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){this.set("isActiveViewAgnostic",!0),this.signedIn=this.appContext.getViewer().signedIn,this.params=t,this.config={displayCurate:!("displayCurate"in t)||t.displayCurate,displayShare:"displayShare"in t&&t.displayShare,photoItem:t.photoItem,theme:t.theme,enableFaveKey:t.enableFaveKey},this.config.displayCurate=this.config.displayCurate&&this.signedIn,t.subviewParams={"like-engagement-item-view":{photoId:t.photoItem.photoId,showCount:!0,size:"small",isPadded:!1,theme:"overlay"===this.config.theme?"light":void 0},"fluid-share-photo-view":{photoId:t.photoItem.photoId,nsid:t.photoItem.owner.nsid,size:"small",theme:"light"}},this.curationHelper=new e.CurationHelper(this.appContext,{view:this})},subviewConfig:{"like-engagement-item-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,additionalViewClasses:["engagement-item","like"],disabled:function(){return!this.appContext.flipper.isFlipped("enable-likes")}},"fluid-share-photo-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,additionalViewClasses:["engagement-item","share"]}},buildContainer:function(){this.setContainerWithTemplate("photo-card-engagement",this.config)},activate:function(){var e=this.get("container");this.faveNode=e.one(".engagement-item.fave"),this.commentNode=e.one(".engagement-item.comment"),this.curateNode=e.one(".engagement-item.curate"),this.faveNode&&(this.faveCountNode=this.faveNode.one(".engagement-count"),this.registerEventHandler(this.faveNode.on(["click","key"],this.handleFaveClick.bind(this),"down:13")),this.config.enableFaveKey&&(this.keyEventHandler=this.attachKeyEvent("down:70",this.handleFaveKeyPress.bind(this)))),this.commentNode&&(this.commentIcon=this.commentNode.one(".engagement-icon"),this.commentCountNode=this.commentNode.one(".engagement-count"),this.registerEventHandler(this.commentNode.on(["click","key"],this.handleCommentClick.bind(this),"down:13"))),this.curateNode&&this.registerEventHandler(this.curateNode.on(["click","key"],this.handleCurateClick.bind(this),"down:13")),this.commentCountNode&&this.config.photoItem.engagementModel.on("valuesChanged",(e=>{if(e.commentCount){var t=e.commentCount.newVal;this.commentCountNode.set("text",e.commentCount.newVal),this.commentCountNode.toggleClass("empty",0===t)}}))},handleFaveKeyPress:function(e){70===e.keyCode&&this.handleFaveClick(e)},handleFaveClick:function(t){var i,o=this,s=this.faveNode,a=this.faveCountNode;this.faveNode.hasClass("can-not-fave")||(this.signedIn?this.isFaving||(this.isFaving=!0,this.config.photoItem.engagementModel.toggleFave(),i=this.config.photoItem.engagementModel.getValue("faveCount"),s.toggleClass("faved",this.config.photoItem.engagementModel.getValue("isFaved")),a.toggleClass("empty",0===i),a&&i>0?a.set("text",i):a.set("text",""),this.config.photoItem.engagementModel.remoteUpdate().then((function(){o.isFaving=!1}),(function(e){3!==e.code&&(o.config.photoItem.engagementModel.toggleFave(),s.toggleClass("faved",o.config.photoItem.engagementModel.getValue("isFaved")),a&&(a.set("text",i),a.toggleClass("empty",0===i))),n.error("Error faving photo",{err:e}),o.isFaving=!1}))):this.showSignUpAndFaveModal(this.config.photoItem.photoId,e.config.win.location.href))},handleCommentClick:function(){var t=this,n={appContext:this.appContext,photoId:this.config.photoItem.photoId,isScrollable:!0},i=this.config.photoItem.engagementModel.getValue("commentCount");if(this.signedIn||0!==i){var o=new e.ModalDroparoundHelper(this.appContext,{configs:{common:{subviewName:"photo-comments-view"},droparound:{subviewParams:n,preferTop:!0,width:400,height:400,anchorElement:this.commentIcon,keyboardAnchorElement:this.commentNode},modal:{subviewParams:Object.assign({},n,{hasHeader:!0}),height:550,flexLayout:!0}}});o.show(),t.registerEventHandler(e.on("addComment:showingSignupModal",(function(){o.close()}))),t.registerEventHandler(o.on("close",(function(){t.commentNode.removeClass("active"),t.fire("menuClosed")}))),this.commentNode.addClass("active"),this.fire("menuOpened")}else this.showSignUpAndCommentModal()},handleCurateClick:function(){var e=this,t=this.config.photoItem.isOwner;"fluid-droparound-view"===this.curationHelper.showAddToCuration({photoId:this.config.photoItem.photoId,showAlbums:t,showGalleries:!t,anchorNode:this.curateNode}).name&&(this.fire("menuOpened"),this.curationHelper.on("curateDroparoundClosed",(function(){e.fire("menuClosed"),e.curateNode.removeClass("active")})),this.curateNode.addClass("active"))},showSignUpAndFaveModal:function(t,n){var i,o=this.intlMessage({intlName:"fave-view.SIGN_IN_BEFORE_FAVE_TITLE"}),s=this.intlMessage({intlName:"fave-view.JOIN_FLICKR_AND_FAVE"});i=new e.Views.SignUpModal({appContext:this.appContext,signUpHeaderClass:"signup-fave",signUpTitle:o,signUpMessage:s,beaconPrefix:"fave"}),this.registerEventHandler(i.on("signUpClick",(function(i){e.SigninHelper.signUpPendingFave({id:t},{postLoginUrl:n})}))),this.registerEventHandler(i.on("signInClick",(function(i){e.SigninHelper.addPendingFave({id:t},{postLoginUrl:n})}))),i.show()},showSignUpAndCommentModal:function(){var t,n=e.config.win.location.href,i=this.intlMessage({intlName:"photo-page-scrappy.SIGNUP_AND_COMMENT_TITLE"}),o=this.intlMessage({intlName:"photo-page-scrappy.SIGNUP_AND_COMMENT_MESSAGE"});(t=new e.Views.SignUpModal({appContext:this.appContext,signUpHeaderClass:"signup-upload",signUpTitle:i,signUpMessage:o,beaconPrefix:"addComment"})).on("signUpClick",(()=>{e.SigninHelper._redirectToSignUp("",{postLoginUrl:n})})),t.on("signInClick",(()=>{e.SigninHelper._redirectToSignin("",{postLoginUrl:n})})),t.show()},toggleCommentNode:function(e){this.commentNode&&this.commentNode.toggleClass("hidden",!e)},toggleFaveNode:function(e){this.faveNode&&this.faveNode.toggleClass("hidden",!e)}})}),"@VERSION@",{requires:["flickr-view","photo-comments-view","fluid-share-photo-view","hermes-template-photo-card-engagement","curation-helper","modal-droparound-helper"],optionalRequires:["hermes-core"],langBundles:["common","comments","fave-view","photo-page-scrappy"]});YUI.add("hermes-template-photo-well",(function(n,l){var e=n.Template.Handlebars.revive({1:function(n,l,e,a,t){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return null!=(o=r(e,"if").call(null!=l?l:n.nullContext||{},null!=l?r(l,"isResponsiveMobile"):l,{name:"if",hash:{},fn:n.program(2,t,0),inverse:n.program(4,t,0),data:t,loc:{start:{line:2,column:1},end:{line:12,column:8}}}))?o:""},2:function(n,l,e,a,t){var o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t\t"+n.escapeExpression((o(e,"outlet")||l&&o(l,"outlet")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},null!=l?o(l,"mobile-photo-well-view"):l,{name:"outlet",hash:{},data:t,loc:{start:{line:3,column:2},end:{line:3,column:35}}}))+"\n"},4:function(n,l,e,a,t){var o,r=null!=l?l:n.nullContext||{},i=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t<a class="navigate-target navigate-prev'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"prev-is-not-clickable"):l,{name:"if",hash:{},fn:n.program(5,t,0),inverse:n.noop,data:t,loc:{start:{line:5,column:41},end:{line:5,column:86}}}))?o:"")+(null!=(o=i(e,"if").call(r,null!=l?i(l,"is-hidden"):l,{name:"if",hash:{},fn:n.program(7,t,0),inverse:n.noop,data:t,loc:{start:{line:5,column:86},end:{line:5,column:120}}}))?o:"")+(null!=(o=i(e,"if").call(r,null!=l?i(l,"is-video"):l,{name:"if",hash:{},fn:n.program(9,t,0),inverse:n.noop,data:t,loc:{start:{line:5,column:120},end:{line:5,column:152}}}))?o:"")+'" href="'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"prev-url"):l,{name:"if",hash:{},fn:n.program(11,t,0),inverse:n.program(13,t,0),data:t,loc:{start:{line:5,column:160},end:{line:5,column:204}}}))?o:"")+'" title="'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"prev-url"):l,{name:"if",hash:{},fn:n.program(15,t,0),inverse:n.noop,data:t,loc:{start:{line:5,column:213},end:{line:5,column:250}}}))?o:"")+'"  data-track="prevPhotoButtonClick" data-action="ad"><span class="hide-text">&rarr;</span></a>\n\t\t<a class="navigate-target-arrow-only navigate-target navigate-prev'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"prev-is-not-clickable"):l,{name:"if",hash:{},fn:n.program(5,t,0),inverse:n.noop,data:t,loc:{start:{line:6,column:68},end:{line:6,column:113}}}))?o:"")+(null!=(o=i(e,"if").call(r,null!=l?i(l,"is-hidden"):l,{name:"if",hash:{},fn:n.program(7,t,0),inverse:n.noop,data:t,loc:{start:{line:6,column:113},end:{line:6,column:147}}}))?o:"")+(null!=(o=i(e,"if").call(r,null!=l?i(l,"is-video"):l,{name:"if",hash:{},fn:n.program(9,t,0),inverse:n.noop,data:t,loc:{start:{line:6,column:147},end:{line:6,column:179}}}))?o:"")+'" href="'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"prev-url"):l,{name:"if",hash:{},fn:n.program(11,t,0),inverse:n.program(13,t,0),data:t,loc:{start:{line:6,column:187},end:{line:6,column:231}}}))?o:"")+'" data-track="prevPhotoButtonClick" data-action="ad"><span class="hide-text">&larr;</span></a>\n\n\t\t'+n.escapeExpression((i(e,"outlet")||l&&i(l,"outlet")||n.hooks.helperMissing).call(r,null!=l?i(l,"photo-well-media-view"):l,{name:"outlet",hash:{},data:t,loc:{start:{line:8,column:2},end:{line:8,column:34}}}))+'\n\n\t\t<a class="navigate-target navigate-next'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"next-is-not-clickable"):l,{name:"if",hash:{},fn:n.program(5,t,0),inverse:n.noop,data:t,loc:{start:{line:10,column:41},end:{line:10,column:86}}}))?o:"")+(null!=(o=i(e,"if").call(r,null!=l?i(l,"is-hidden"):l,{name:"if",hash:{},fn:n.program(7,t,0),inverse:n.noop,data:t,loc:{start:{line:10,column:86},end:{line:10,column:120}}}))?o:"")+(null!=(o=i(e,"if").call(r,null!=l?i(l,"is-video"):l,{name:"if",hash:{},fn:n.program(9,t,0),inverse:n.noop,data:t,loc:{start:{line:10,column:120},end:{line:10,column:152}}}))?o:"")+'" href="'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"next-url"):l,{name:"if",hash:{},fn:n.program(17,t,0),inverse:n.program(13,t,0),data:t,loc:{start:{line:10,column:160},end:{line:10,column:204}}}))?o:"")+'" title="'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"next-url"):l,{name:"if",hash:{},fn:n.program(19,t,0),inverse:n.noop,data:t,loc:{start:{line:10,column:213},end:{line:10,column:250}}}))?o:"")+'" data-track="nextPhotoButtonClick" data-action="ad"><span class="hide-text">&rarr;</span></a>\n\t\t<a class="navigate-target-arrow-only navigate-target navigate-next'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"next-is-not-clickable"):l,{name:"if",hash:{},fn:n.program(5,t,0),inverse:n.noop,data:t,loc:{start:{line:11,column:68},end:{line:11,column:113}}}))?o:"")+(null!=(o=i(e,"if").call(r,null!=l?i(l,"is-hidden"):l,{name:"if",hash:{},fn:n.program(7,t,0),inverse:n.noop,data:t,loc:{start:{line:11,column:113},end:{line:11,column:147}}}))?o:"")+(null!=(o=i(e,"if").call(r,null!=l?i(l,"is-video"):l,{name:"if",hash:{},fn:n.program(9,t,0),inverse:n.noop,data:t,loc:{start:{line:11,column:147},end:{line:11,column:179}}}))?o:"")+'" href="'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"next-url"):l,{name:"if",hash:{},fn:n.program(17,t,0),inverse:n.program(13,t,0),data:t,loc:{start:{line:11,column:187},end:{line:11,column:231}}}))?o:"")+'" data-track="nextPhotoButtonClick" data-action="ad"><span class="hide-text">&rarr;</span></a>\n'},5:function(n,l,e,a,t){return" no-click"},7:function(n,l,e,a,t){return" is-hidden"},9:function(n,l,e,a,t){return" is-video"},11:function(n,l,e,a,t){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return n.escapeExpression("function"==typeof(o=null!=(o=r(e,"prev-url")||(null!=l?r(l,"prev-url"):l))?o:n.hooks.helperMissing)?o.call(null!=l?l:n.nullContext||{},{name:"prev-url",hash:{},data:t,loc:{start:{line:5,column:176},end:{line:5,column:188}}}):o)},13:function(n,l,e,a,t){return"#"},15:function(n,l,e,a,t){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return n.escapeExpression("function"==typeof(o=null!=(o=r(e,"prev-title")||(null!=l?r(l,"prev-title"):l))?o:n.hooks.helperMissing)?o.call(null!=l?l:n.nullContext||{},{name:"prev-title",hash:{},data:t,loc:{start:{line:5,column:229},end:{line:5,column:243}}}):o)},17:function(n,l,e,a,t){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return n.escapeExpression("function"==typeof(o=null!=(o=r(e,"next-url")||(null!=l?r(l,"next-url"):l))?o:n.hooks.helperMissing)?o.call(null!=l?l:n.nullContext||{},{name:"next-url",hash:{},data:t,loc:{start:{line:10,column:176},end:{line:10,column:188}}}):o)},19:function(n,l,e,a,t){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return n.escapeExpression("function"==typeof(o=null!=(o=r(e,"next-title")||(null!=l?r(l,"next-title"):l))?o:n.hooks.helperMissing)?o.call(null!=l?l:n.nullContext||{},{name:"next-title",hash:{},data:t,loc:{start:{line:10,column:229},end:{line:10,column:243}}}):o)},21:function(n,l,e,a,t){var o,r=null!=l?l:n.nullContext||{},i=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t<a class="navigate-target navigate-prev'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"prev-is-not-clickable"):l,{name:"if",hash:{},fn:n.program(5,t,0),inverse:n.noop,data:t,loc:{start:{line:14,column:40},end:{line:14,column:85}}}))?o:"")+(null!=(o=i(e,"if").call(r,null!=l?i(l,"is-hidden"):l,{name:"if",hash:{},fn:n.program(7,t,0),inverse:n.noop,data:t,loc:{start:{line:14,column:85},end:{line:14,column:119}}}))?o:"")+(null!=(o=i(e,"if").call(r,null!=l?i(l,"is-video"):l,{name:"if",hash:{},fn:n.program(9,t,0),inverse:n.noop,data:t,loc:{start:{line:14,column:119},end:{line:14,column:151}}}))?o:"")+'" href="'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"prev-url"):l,{name:"if",hash:{},fn:n.program(11,t,0),inverse:n.program(13,t,0),data:t,loc:{start:{line:14,column:159},end:{line:14,column:203}}}))?o:"")+'" title="'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"prev-url"):l,{name:"if",hash:{},fn:n.program(15,t,0),inverse:n.noop,data:t,loc:{start:{line:14,column:212},end:{line:14,column:249}}}))?o:"")+'"  data-track="prevPhotoButtonClick" data-action="ad"><span class="hide-text">&rarr;</span></a>\n\t<a class="navigate-target-arrow-only navigate-target navigate-prev'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"prev-is-not-clickable"):l,{name:"if",hash:{},fn:n.program(5,t,0),inverse:n.noop,data:t,loc:{start:{line:15,column:67},end:{line:15,column:112}}}))?o:"")+(null!=(o=i(e,"if").call(r,null!=l?i(l,"is-hidden"):l,{name:"if",hash:{},fn:n.program(7,t,0),inverse:n.noop,data:t,loc:{start:{line:15,column:112},end:{line:15,column:146}}}))?o:"")+(null!=(o=i(e,"if").call(r,null!=l?i(l,"is-video"):l,{name:"if",hash:{},fn:n.program(9,t,0),inverse:n.noop,data:t,loc:{start:{line:15,column:146},end:{line:15,column:178}}}))?o:"")+'" href="'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"prev-url"):l,{name:"if",hash:{},fn:n.program(11,t,0),inverse:n.program(13,t,0),data:t,loc:{start:{line:15,column:186},end:{line:15,column:230}}}))?o:"")+'" data-track="prevPhotoButtonClick" data-action="ad"><span class="hide-text">&larr;</span></a>\n\n\t'+n.escapeExpression((i(e,"outlet")||l&&i(l,"outlet")||n.hooks.helperMissing).call(r,null!=l?i(l,"photo-well-media-view"):l,{name:"outlet",hash:{},data:t,loc:{start:{line:17,column:1},end:{line:17,column:33}}}))+'\n\n\t<a class="navigate-target navigate-next'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"next-is-not-clickable"):l,{name:"if",hash:{},fn:n.program(5,t,0),inverse:n.noop,data:t,loc:{start:{line:19,column:40},end:{line:19,column:85}}}))?o:"")+(null!=(o=i(e,"if").call(r,null!=l?i(l,"is-hidden"):l,{name:"if",hash:{},fn:n.program(7,t,0),inverse:n.noop,data:t,loc:{start:{line:19,column:85},end:{line:19,column:119}}}))?o:"")+(null!=(o=i(e,"if").call(r,null!=l?i(l,"is-video"):l,{name:"if",hash:{},fn:n.program(9,t,0),inverse:n.noop,data:t,loc:{start:{line:19,column:119},end:{line:19,column:151}}}))?o:"")+'" href="'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"next-url"):l,{name:"if",hash:{},fn:n.program(17,t,0),inverse:n.program(13,t,0),data:t,loc:{start:{line:19,column:159},end:{line:19,column:203}}}))?o:"")+'" title="'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"next-url"):l,{name:"if",hash:{},fn:n.program(19,t,0),inverse:n.noop,data:t,loc:{start:{line:19,column:212},end:{line:19,column:249}}}))?o:"")+'" data-track="nextPhotoButtonClick" data-action="ad"><span class="hide-text">&rarr;</span></a>\n\t<a class="navigate-target-arrow-only navigate-target navigate-next'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"next-is-not-clickable"):l,{name:"if",hash:{},fn:n.program(5,t,0),inverse:n.noop,data:t,loc:{start:{line:20,column:67},end:{line:20,column:112}}}))?o:"")+(null!=(o=i(e,"if").call(r,null!=l?i(l,"is-hidden"):l,{name:"if",hash:{},fn:n.program(7,t,0),inverse:n.noop,data:t,loc:{start:{line:20,column:112},end:{line:20,column:146}}}))?o:"")+(null!=(o=i(e,"if").call(r,null!=l?i(l,"is-video"):l,{name:"if",hash:{},fn:n.program(9,t,0),inverse:n.noop,data:t,loc:{start:{line:20,column:146},end:{line:20,column:178}}}))?o:"")+'" href="'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"next-url"):l,{name:"if",hash:{},fn:n.program(17,t,0),inverse:n.program(13,t,0),data:t,loc:{start:{line:20,column:186},end:{line:20,column:230}}}))?o:"")+'" data-track="nextPhotoButtonClick" data-action="ad"><span class="hide-text">&rarr;</span></a>\n'},23:function(n,l,e,a,t){var o,r=null!=l?l:n.nullContext||{},i=n.hooks.helperMissing,u=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return(null!=(o=u(e,"if").call(r,null!=l?u(l,"opt-out-enabled"):l,{name:"if",hash:{},fn:n.program(24,t,0),inverse:n.noop,data:t,loc:{start:{line:24,column:1},end:{line:28,column:8}}}))?o:"")+"\n"+(null!=(o=(u(e,"isFlipped")||l&&u(l,"isFlipped")||i).call(r,"enable-photo-page-lightbox-updates",{name:"isFlipped",hash:{},fn:n.program(26,t,0),inverse:n.program(28,t,0),data:t,loc:{start:{line:30,column:1},end:{line:43,column:15}}}))?o:"")+"\n\t"+n.escapeExpression((u(e,"outlet")||l&&u(l,"outlet")||i).call(r,null!=l?u(l,"people-notes-view"):l,{name:"outlet",hash:{},data:t,loc:{start:{line:45,column:1},end:{line:45,column:29}}}))+"\n\n"},24:function(n,l,e,a,t){return'\t<div class="feedback-widget">\n\t\t<button class="ui-button ui-button-cta ui-button-transparent"><span>Opt-out &amp; Feedback</span></button>\n\t</div>\n'},26:function(n,l,e,a,t){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t<header class="header is-hidden">\n\t\t\t<div class="header-container"></div>\n\t\t\t'+n.escapeExpression((r(e,"outlet")||l&&r(l,"outlet")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},null!=l?r(l,"photo-sidebar-toggle-view"):l,{name:"outlet",hash:{},data:t,loc:{start:{line:33,column:3},end:{line:33,column:39}}}))+"\n\t\t</header>\n\n"+(null!=(o=n.invokePartial(r(a,"photo-card-footer"),l,{name:"photo-card-footer",hash:{additionalClasses:"is-hidden",photoConfig:null!=l?r(l,"photoConfig"):l},data:t,indent:"\t\t",helpers:e,partials:a,decorators:n.decorators}))?o:"")},28:function(n,l,e,a,t){var o=null!=l?l:n.nullContext||{},r=n.hooks.helperMissing,i=n.escapeExpression,u=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t\t"+i((u(e,"outlet")||l&&u(l,"outlet")||r).call(o,null!=l?u(l,"photo-sidebar-toggle-view"):l,{name:"outlet",hash:{},data:t,loc:{start:{line:38,column:2},end:{line:38,column:38}}}))+'\n\n\t\t<div class="engagement-container enable-photo-page-lightbox-updates-not-flipped"></div>\n\n\t\t'+i((u(e,"outlet")||l&&u(l,"outlet")||r).call(o,null!=l?u(l,"attribution-view"):l,{name:"outlet",hash:{},data:t,loc:{start:{line:42,column:2},end:{line:42,column:29}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(n,l,e,a,t){var o,r=null!=l?l:n.nullContext||{},i=n.hooks.helperMissing,u=n.escapeExpression,c=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return(null!=(o=(c(e,"isFlipped")||l&&c(l,"isFlipped")||i).call(r,"enable-photo-page-lightbox-updates",{name:"isFlipped",hash:{},fn:n.program(1,t,0),inverse:n.program(21,t,0),data:t,loc:{start:{line:1,column:0},end:{line:21,column:14}}}))?o:"")+"\n"+(null!=(o=c(e,"unless").call(r,null!=l?c(l,"is-ad"):l,{name:"unless",hash:{},fn:n.program(23,t,0),inverse:n.noop,data:t,loc:{start:{line:23,column:0},end:{line:47,column:11}}}))?o:"")+"\n"+u((c(e,"outlet")||l&&c(l,"outlet")||i).call(r,null!=l?c(l,"person-menu-view"):l,{name:"outlet",hash:{},data:t,loc:{start:{line:49,column:0},end:{line:49,column:27}}}))+"\n"+u((c(e,"outlet")||l&&c(l,"outlet")||i).call(r,null!=l?c(l,"group-menu-view"):l,{name:"outlet",hash:{},data:t,loc:{start:{line:50,column:0},end:{line:50,column:26}}}))+"\n"},usePartial:!0,useData:!0}),a={};n.Array.each(["photo-card-footer"],(function(l){var e=n.Template.get("hermes/"+l);e&&(a[l]=e)})),n.Template.register("hermes/photo-well",(function(l,t){return(t=t||{}).partials=t.partials?n.merge(a,t.partials):a,e(l,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-photo-card-footer"]});YUI.add("hermes-template-reboot-welcome-dialog-content",(function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,o,a){return"\tWhile we continue to develop the beta experience, we want your feedback. In case you need some of the missing functionality, you can easily opt-out and go back to the old experience.\n"},3:function(e,t,n,o,a){return"\tPlease continue providing us with feedback so we can continue to improve Flickr.\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,o,a){var r,i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"Flickr is about the amazing photos you capture and the communities that you build around these photos. The goal of our photo page redesign is to provide you with a fast photo browsing experience and an easy interface to build &amp; maintain relationships.<br>\n<br>\nOver the last 4 weeks, we received a lot of feedback from the Flickr community regarding the photo page design. Based on the feedback, we are experimenting with different variations of the photo page to identify the best experience.<br>\n<br>\n"+(null!=(r=i(n,"if").call(null!=t?t:e.nullContext||{},null!=t?i(t,"opt-out-enabled"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a,loc:{start:{line:5,column:0},end:{line:9,column:7}}}))?r:"")+"<br>"},useData:!0}),o={};e.Array.each([],(function(t){var n=e.Template.get("hermes/"+t);n&&(o[t]=n)})),e.Template.register("hermes/reboot-welcome-dialog-content",(function(t,a){return(a=a||{}).partials=a.partials?e.merge(o,a.partials):o,n(t,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-photo-opt-out",(function(e,t){var n=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,t,n,l,r){var a,o=null!=t?t:e.nullContext||{},u=e.hooks.helperMissing,i="function",p=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<form action="//'+p(typeof(a=null!=(a=s(n,"host")||(null!=t?s(t,"host"):t))?a:u)===i?a.call(o,{name:"host",hash:{},data:r,loc:{start:{line:1,column:16},end:{line:1,column:24}}}):a)+'/help/optin" method="post">\n\t<input type="hidden" name="photo_opt" value="0">\n\t<input type="hidden" name="redirect_url" value="'+p(typeof(a=null!=(a=s(n,"redirect-url")||(null!=t?s(t,"redirect-url"):t))?a:u)===i?a.call(o,{name:"redirect-url",hash:{},data:r,loc:{start:{line:3,column:49},end:{line:3,column:65}}}):a)+'">\n\t<input type="submit" class="ui-button" value="Go back to the old experience">\n</form>'},useData:!0}),l={};e.Array.each([],(function(t){var n=e.Template.get("hermes/"+t);n&&(l[t]=n)})),e.Template.register("hermes/photo-opt-out",(function(t,r){return(r=r||{}).partials=r.partials?e.merge(l,r.partials):l,n(t,r)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-photo-well-media",(function(n,l){var t=n.Template.Handlebars.revive({1:function(n,l,t,e,a){var o,i=null!=l?l:n.nullContext||{},s=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t<div class="restricted-interstitial">\n\t\t<div class="restricted-interstitial-message">\n\t\t\t<h2>'+n.escapeExpression((s(t,"intlMessage")||l&&s(l,"intlMessage")||n.hooks.helperMissing).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADULT_CONTENT"},data:a,loc:{start:{line:4,column:7},end:{line:4,column:66}}}))+"</h2>\n"+(null!=(o=s(t,"if").call(i,null!=l?s(l,"isSignedIn"):l,{name:"if",hash:{},fn:n.program(2,a,0),inverse:n.program(5,a,0),data:a,loc:{start:{line:5,column:3},end:{line:14,column:10}}}))?o:"")+"\t\t</div>\n\t</div>\n"},2:function(n,l,t,e,a){var o,i=null!=l?l:n.nullContext||{},s=n.hooks.helperMissing,r=n.escapeExpression,c=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t\t\t\t<p>"+r((c(t,"intlMessage")||l&&c(l,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.MATURE_AUDIENCES"},data:a,loc:{start:{line:6,column:7},end:{line:6,column:69}}}))+"<br />"+r((c(t,"intlMessage")||l&&c(l,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.USER_DISCRETION"},data:a,loc:{start:{line:6,column:75},end:{line:6,column:136}}}))+"</p>\n\n"+(null!=(o=c(t,"unless").call(i,null!=l?c(l,"isMinor"):l,{name:"unless",hash:{},fn:n.program(3,a,0),inverse:n.noop,data:a,loc:{start:{line:8,column:4},end:{line:11,column:15}}}))?o:"")},3:function(n,l,t,e,a){var o=null!=l?l:n.nullContext||{},i=n.hooks.helperMissing,s=n.escapeExpression,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t\t\t\t\t<p><button class='ui-button'><span>"+s((r(t,"intlMessage")||l&&r(l,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.SHOW_ME_THIS_CONTENT_TYPE"},data:a,loc:{start:{line:9,column:40},end:{line:9,column:111}}}))+"</span></button></p>\n\t\t\t\t\t<p>"+s((r(t,"intlHTMLMessage")||l&&r(l,"intlHTMLMessage")||i).call(o,{name:"intlHTMLMessage",hash:{intlName:"photo-page-scrappy.CHANGE_SAFE_SEARCH_IN_SETTINGS"},data:a,loc:{start:{line:10,column:8},end:{line:10,column:88}}}))+"</p>\n"},5:function(n,l,t,e,a){var o,i=null!=l?l:n.nullContext||{},s=n.hooks.helperMissing,r=n.escapeExpression,c=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t\t\t\t<p>"+r((c(t,"intlMessage")||l&&c(l,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.SIGNED_IN_FOR_CONTENT"},data:a,loc:{start:{line:13,column:7},end:{line:13,column:74}}}))+' <a href="//'+r("function"==typeof(o=null!=(o=c(t,"host")||(null!=l?c(l,"host"):l))?o:s)?o.call(i,{name:"host",hash:{},data:a,loc:{start:{line:13,column:86},end:{line:13,column:94}}}):o)+'/signin/" data-track="photoWellSignInClick">'+r((c(t,"intlMessage")||l&&c(l,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"common.SIGN_IN"},data:a,loc:{start:{line:13,column:138},end:{line:13,column:179}}}))+"</a></p>\n"},7:function(n,l,t,e,a){var o,i=null!=l?l:n.nullContext||{},s=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\n"+(null!=(o=s(t,"if").call(i,null!=l?s(l,"isVideo"):l,{name:"if",hash:{},fn:n.program(8,a,0),inverse:n.program(11,a,0),data:a,loc:{start:{line:19,column:2},end:{line:36,column:9}}}))?o:"")+(null!=(o=s(t,"if").call(i,null!=l?s(l,"isAd"):l,{name:"if",hash:{},fn:n.program(14,a,0),inverse:n.noop,data:a,loc:{start:{line:37,column:1},end:{line:40,column:8}}}))?o:"")},8:function(n,l,t,e,a){var o,i,s=null!=l?l:n.nullContext||{},r=n.hooks.helperMissing,c="function",u=n.escapeExpression,h=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t<div class="videoplayer main-photo" style="width:'+u(typeof(i=null!=(i=h(t,"width")||(null!=l?h(l,"width"):l))?i:r)===c?i.call(s,{name:"width",hash:{},data:a,loc:{start:{line:20,column:52},end:{line:20,column:61}}}):i)+"px; height:"+u(typeof(i=null!=(i=h(t,"height")||(null!=l?h(l,"height"):l))?i:r)===c?i.call(s,{name:"height",hash:{},data:a,loc:{start:{line:20,column:72},end:{line:20,column:82}}}):i)+'px;"><video id="video_1" poster="'+u(typeof(i=null!=(i=h(t,"src")||(null!=l?h(l,"src"):l))?i:r)===c?i.call(s,{name:"src",hash:{},data:a,loc:{start:{line:20,column:115},end:{line:20,column:122}}}):i)+'" class="video-js vjs-big-play-centered inherit-size '+(null!=(o=(h(t,"isFlipped")||l&&h(l,"isFlipped")||r).call(s,"enable-photo-page-lightbox-updates",{name:"isFlipped",hash:{},fn:n.program(9,a,0),inverse:n.noop,data:a,loc:{start:{line:20,column:175},end:{line:20,column:273}}}))?o:"")+'"></video></div>\n'},9:function(n,l,t,e,a){return"vjs-show-big-play-button-on-pause"},11:function(n,l,t,e,a){var o,i,s=null!=l?l:n.nullContext||{},r=n.hooks.helperMissing,c=n.escapeExpression,u="function",h=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\n\t\t\t<div class="facade-of-protection-neue '+(null!=(o=h(t,"if").call(s,null!=l?h(l,"is-video"):l,{name:"if",hash:{},fn:n.program(12,a,0),inverse:n.noop,data:a,loc:{start:{line:23,column:41},end:{line:23,column:72}}}))?o:"")+'">\n\t\t\t\t'+c((h(t,"outlet")||l&&h(l,"outlet")||r).call(s,null!=l?h(l,"zoom-view"):l,{name:"outlet",hash:{},data:a,loc:{start:{line:24,column:4},end:{line:24,column:24}}}))+'\n\t\t\t</div>\n\n\t\t\t<img width="'+c(typeof(i=null!=(i=h(t,"width")||(null!=l?h(l,"width"):l))?i:r)===u?i.call(s,{name:"width",hash:{},data:a,loc:{start:{line:27,column:15},end:{line:27,column:24}}}):i)+'" height="'+c(typeof(i=null!=(i=h(t,"height")||(null!=l?h(l,"height"):l))?i:r)===u?i.call(s,{name:"height",hash:{},data:a,loc:{start:{line:27,column:34},end:{line:27,column:44}}}):i)+'" src="'+c(typeof(i=null!=(i=h(t,"src")||(null!=l?h(l,"src"):l))?i:r)===u?i.call(s,{name:"src",hash:{},data:a,loc:{start:{line:27,column:51},end:{line:27,column:58}}}):i)+'" class="low-res-photo" alt="'+c(typeof(i=null!=(i=h(t,"imgAltText")||(null!=l?h(l,"imgAltText"):l))?i:r)===u?i.call(s,{name:"imgAltText",hash:{},data:a,loc:{start:{line:27,column:87},end:{line:27,column:101}}}):i)+'">\n\t\t\t<img width="'+c(typeof(i=null!=(i=h(t,"width")||(null!=l?h(l,"width"):l))?i:r)===u?i.call(s,{name:"width",hash:{},data:a,loc:{start:{line:28,column:15},end:{line:28,column:24}}}):i)+'" height="'+c(typeof(i=null!=(i=h(t,"height")||(null!=l?h(l,"height"):l))?i:r)===u?i.call(s,{name:"height",hash:{},data:a,loc:{start:{line:28,column:34},end:{line:28,column:44}}}):i)+'" src="'+c(typeof(i=null!=(i=h(t,"highResSrc")||(null!=l?h(l,"highResSrc"):l))?i:r)===u?i.call(s,{name:"highResSrc",hash:{},data:a,loc:{start:{line:28,column:51},end:{line:28,column:65}}}):i)+'" class="main-photo is-hidden" alt="'+c(typeof(i=null!=(i=h(t,"imgAltText")||(null!=l?h(l,"imgAltText"):l))?i:r)===u?i.call(s,{name:"imgAltText",hash:{},data:a,loc:{start:{line:28,column:101},end:{line:28,column:115}}}):i)+'">\n\t\t\t<script nonce="'+c(typeof(i=null!=(i=h(t,"cspNonce")||(null!=l?h(l,"cspNonce"):l))?i:r)===u?i.call(s,{name:"cspNonce",hash:{},data:a,loc:{start:{line:29,column:18},end:{line:29,column:30}}}):i)+"\">\n\t\t\tvar img = document.querySelector('.photo-well-media-view img.main-photo');\n\t\t\timg.onload = function () { registerFirstPhoto(img); };\n\t\t\t<\/script>\n\t\t\t<noscript>\n\t\t\t\t<img width=\""+c(typeof(i=null!=(i=h(t,"width")||(null!=l?h(l,"width"):l))?i:r)===u?i.call(s,{name:"width",hash:{},data:a,loc:{start:{line:34,column:16},end:{line:34,column:25}}}):i)+'" height="'+c(typeof(i=null!=(i=h(t,"height")||(null!=l?h(l,"height"):l))?i:r)===u?i.call(s,{name:"height",hash:{},data:a,loc:{start:{line:34,column:35},end:{line:34,column:45}}}):i)+'" src="'+c(typeof(i=null!=(i=h(t,"highResSrc")||(null!=l?h(l,"highResSrc"):l))?i:r)===u?i.call(s,{name:"highResSrc",hash:{},data:a,loc:{start:{line:34,column:52},end:{line:34,column:66}}}):i)+'" class="main-photo" alt="'+c(typeof(i=null!=(i=h(t,"imgAltText")||(null!=l?h(l,"imgAltText"):l))?i:r)===u?i.call(s,{name:"imgAltText",hash:{},data:a,loc:{start:{line:34,column:92},end:{line:34,column:106}}}):i)+'">\n\t\t\t</noscript>\n'},12:function(n,l,t,e,a){return"is-video"},14:function(n,l,t,e,a){var o,i=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t<span class="ad-info">'+n.escapeExpression((i(t,"intlHTMLMessage")||l&&i(l,"intlHTMLMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlHTMLMessage",hash:{brand:null!=(o=null!=l?i(l,"ad"):l)?i(o,"brand"):o,intlName:"photo-page-scrappy.FIND_OUT_MORE_AD"},data:a,loc:{start:{line:38,column:25},end:{line:38,column:106}}}))+"</span>\n\t\t</a>\n"},compiler:[8,">= 4.3.0"],main:function(n,l,t,e,a){var o,i=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return null!=(o=i(t,"if").call(null!=l?l:n.nullContext||{},null!=l?i(l,"needsInterstitial"):l,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.program(7,a,0),data:a,loc:{start:{line:1,column:0},end:{line:41,column:7}}}))?o:""},useData:!0}),e={};n.Array.each([],(function(l){var t=n.Template.get("hermes/"+l);t&&(e[l]=t)})),n.Template.register("hermes/photo-well-media",(function(l,a){return(a=a||{}).partials=a.partials?n.merge(e,a.partials):e,t(l,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});